#!/bin/bash

#curl 'https://console.aws.amazon.com/deepracer/api/awssilverstonecloudservice' -H 'Sec-Fetch-Mode: cors' -H 'Sec-Fetch-Site: same-origin' -H 'Origin: https://console.aws.amazon.com' -H 'Accept-Encoding: gzip, deflate, br' -H "X-CSRF-TOKEN: ${X_CSRF_TOKEN}" -H 'Accept-Language: en-US,en;q=0.9,de;q=0.8,id;q=0.7,ms;q=0.6' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36' -H 'Content-Type: application/json' -H 'Accept: */*' -H 'Referer: https://console.aws.amazon.com/deepracer/home?region=us-east-1' -H "Cookie: ${AWS_COOKIE}" -H 'Connection: keep-alive' --data-binary '{"headers":{"X-Amz-User-Agent":"aws-sdk-js/2.324.0 promise","Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AwsSilverstoneCloudService.ListLeaderboardSubmissions"},"path":"/","method":"POST","region":"us-east-1","params":{},"contentString":"{\"LeaderboardArn\":\"arn:aws:deepracer:us-east-1::leaderboard/season-2019-10\",\"MaxResults\":100}","operation":"listLeaderboardSubmissions"}' --compressed

if [ -z $1 ]; then
    SEASON="season-$(date +%Y-%m)"
else
    SEASON="season-$1"
fi

DATA='{"headers":{"X-Amz-User-Agent":"aws-sdk-js/2.324.0 promise","Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AwsSilverstoneCloudService.ListLeaderboardSubmissions"},"path":"/","method":"POST","region":"us-east-1","params":{},"contentString":"{\"LeaderboardArn\":\"arn:aws:deepracer:us-east-1::leaderboard/'
DATA+=$SEASON
DATA+='\",\"MaxResults\":100}","operation":"listLeaderboardSubmissions"}'
export DATA

./aws-execCurl | jq '.'

